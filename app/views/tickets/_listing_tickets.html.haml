.container
  .row
    .col-xs-12
      %h1= title
      %table.table.table-bordered.table-striped(align="center")
        %tr
          %th 公演名
          %th 開催日時
          %th 開催場所
          %th 料金
          %th Contact
          
        - tickets.each do |ticket|
          %tr
            %td= link_to(ticket.event_name, controller: "tickets", action: "show", id: ticket)
            %td= ticket.datetime
            %td= ticket.place
            %td= ticket.price
            - owner = User.find_by(id: ticket.user_id)
            - if owner != nil
              - screen_name = owner.screen_name
            - else
              - screen_name = ""
            %td
              %a(href="#Modal#{ticket.id}" data-toggle="modal") mention to @#{screen_name}
            .modal.fade(id="Modal#{ticket.id}"tabindex="-1" data-toggle="modal" aria-hidden="true")
              .modal-dialog.modal-lg
                .modal-content
                  .modal-header
                    %button.close(type="button" data-dismiss="modal" aria-hidden="true")x
                    %h4.modal-title Twitter
                  .modal-body
                    = form_tag(controller: "tweet", action: "update") do
                      = text_area_tag("message", "@#{screen_name} このチケット欲しいです！  https://extick.herokuapp.com/tickets/#{ticket.id}",  maxlength: "140")
                      .modal-footer
                        %button.btn(data-dismiss="modal" aria-hidden="true") Cancel
                        = submit_tag("Tweet", class: "btn.btn-primary")

            -# %td= link_to('Show', controller: "tickets", action: "show", id: ticket)
            -# %td= link_to('Edit', controller: "tickets", action: "edit", id: ticket)
            -# %td= link_to 'Destroy', ticket, :method => :delete, :data => { :confirm => 'Are you sure?'}
            -# %td= link_to('Destroy', {controller: "tickets", action: "destroy", id: ticket}, data: {confirm: "Are you sure?", method: :delete})
